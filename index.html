<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reddit Assistant Pro - GitHub Pages Ready</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff4500 0%, #ff6b35 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1a1a1b 0%, #343536 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.2em;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1.1em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: white;
            color: #ff4500;
            border-bottom: 3px solid #ff4500;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab-content {
            padding: 40px;
            min-height: 600px;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ff4500;
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff4500 0%, #ff6b35 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 69, 0, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-color: #28a745;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border-color: #dc3545;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-color: #17a2b8;
        }

        .post-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .post-card h3 {
            color: #1a1a1b;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .post-meta {
            color: #878a8c;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .post-content {
            color: #1c1c1e;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .comment-suggestions {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
        }

        .comment-item {
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            position: relative;
        }

        .comment-tone {
            background: #ff4500;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            color: #666;
        }

        .copy-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .copy-btn:hover {
            background: #138496;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #ff4500 0%, #ff6b35 100%);
            color: white;
            padding: 25px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            .tab-content {
                padding: 20px;
            }
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ Reddit Assistant Pro</h1>
            <p>AI-Powered Reddit Content Generator - No Authentication Required</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('browse')">üåê Browse Subreddits</button>
            <button class="tab" onclick="switchTab('create')">‚úçÔ∏è Create Posts</button>
            <button class="tab" onclick="switchTab('comments')">üí¨ AI Comments</button>
            <button class="tab" onclick="switchTab('settings')">‚öôÔ∏è Settings</button>
        </div>

        <div class="tab-content">
            <!-- Browse Tab -->
            <div id="browse" class="tab-pane active">
                <h2>Browse Reddit Posts</h2>
                <div class="form-group">
                    <label>Subreddit:</label>
                    <input type="text" id="subreddit" placeholder="Enter subreddit name (e.g., programming)" value="programming">
                    <button class="btn btn-primary" onclick="loadPosts()">üîç Load Posts</button>
                </div>

                <div id="posts-container">
                    <div class="alert alert-info">
                        Enter a subreddit name and click "Load Posts" to see the latest posts from that community.
                    </div>
                </div>
            </div>

            <!-- Create Posts Tab -->
            <div id="create" class="tab-pane">
                <h2>AI Post Generator</h2>
                <div class="form-group">
                    <label>Topic or Keywords:</label>
                    <input type="text" id="postTopic" placeholder="e.g., Python programming tips, JavaScript frameworks">
                </div>
                <div class="form-group">
                    <label>Target Subreddit:</label>
                    <select id="targetSubreddit">
                        <option value="programming">r/programming</option>
                        <option value="webdev">r/webdev</option>
                        <option value="javascript">r/javascript</option>
                        <option value="python">r/python</option>
                        <option value="learnprogramming">r/learnprogramming</option>
                        <option value="technology">r/technology</option>
                        <option value="AskReddit">r/AskReddit</option>
                        <option value="todayilearned">r/todayilearned</option>
                        <option value="LifeProTips">r/LifeProTips</option>
                        <option value="explainlikeimfive">r/explainlikeimfive</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Post Type:</label>
                    <select id="postType">
                        <option value="discussion">Discussion Post</option>
                        <option value="tutorial">Tutorial/Guide</option>
                        <option value="question">Question</option>
                        <option value="news">News/Update</option>
                        <option value="showoff">Show Off Project</option>
                    </select>
                </div>

                <button class="btn btn-primary" onclick="generatePost()">ü§ñ Generate Post with AI</button>
                <button class="btn btn-secondary" onclick="suggestTopics()">üí° Suggest Trending Topics</button>

                <div id="generated-post" style="display: none;">
                    <h3>Generated Post:</h3>
                    <div class="form-group">
                        <label>Title:</label>
                        <textarea id="generatedTitle" rows="2"></textarea>
                        <button class="copy-btn" onclick="copyToClipboard('generatedTitle')">üìã Copy Title</button>
                    </div>
                    <div class="form-group">
                        <label>Content:</label>
                        <textarea id="generatedContent" rows="10"></textarea>
                        <button class="copy-btn" onclick="copyToClipboard('generatedContent')">üìã Copy Content</button>
                    </div>
                    <div class="alert alert-success">
                        <strong>Ready to Post!</strong> Copy the title and content above, then go to Reddit and create your post manually.
                    </div>
                </div>
            </div>

            <!-- AI Comments Tab -->
            <div id="comments" class="tab-pane">
                <h2>AI Comment Generator</h2>
                <div class="form-group">
                    <label>Post Title:</label>
                    <input type="text" id="commentPostTitle" placeholder="Enter the post title you want to comment on">
                </div>
                <div class="form-group">
                    <label>Post Content (optional):</label>
                    <textarea id="commentPostContent" rows="4" placeholder="Enter the post content for better context"></textarea>
                </div>
                <div class="form-group">
                    <label>Comment Style:</label>
                    <select id="commentStyle">
                        <option value="helpful">Helpful & Informative</option>
                        <option value="funny">Witty & Humorous</option>
                        <option value="agreeable">Supportive & Agreeable</option>
                        <option value="question">Ask Follow-up Questions</option>
                        <option value="story">Share Related Experience</option>
                    </select>
                </div>

                <button class="btn btn-primary" onclick="generateComment()">ü§ñ Generate Comment</button>

                <div id="generated-comments"></div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-pane">
                <h2>Settings</h2>
                <div class="form-group">
                    <label>Gemini API Key (for AI features):</label>
                    <input type="password" id="geminiApiKey" placeholder="Enter your Google Gemini API key">
                    <small>Get your free API key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></small>
                </div>

                <button class="btn btn-success" onclick="saveSettings()">üíæ Save Settings</button>
                <button class="btn btn-secondary" onclick="testGeminiConnection()">üß™ Test AI Connection</button>

                <div id="settings-status"></div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="postsGenerated">0</div>
                        <div class="stat-label">Posts Generated</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="commentsGenerated">0</div>
                        <div class="stat-label">Comments Generated</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="subredditsExplored">0</div>
                        <div class="stat-label">Subreddits Explored</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let geminiApiKey = '';
        let stats = {
            postsGenerated: 0,
            commentsGenerated: 0,
            subredditsExplored: 0
        };

        // Tab switching
        function switchTab(tabName) {
            // Hide all tab panes
            const panes = document.querySelectorAll('.tab-pane');
            panes.forEach(pane => pane.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab pane and activate tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Load posts from subreddit (using Reddit's public JSON API)
        async function loadPosts() {
            const subreddit = document.getElementById('subreddit').value.trim();
            if (!subreddit) {
                showAlert('posts-container', 'Please enter a subreddit name', 'error');
                return;
            }

            document.getElementById('posts-container').innerHTML = '<div class="loading">Loading posts...</div>';

            try {
                const response = await fetch(`https://www.reddit.com/r/${subreddit}/hot.json?limit=20`);
                
                if (!response.ok) {
                    throw new Error(`Subreddit not found or private`);
                }

                const data = await response.json();
                const posts = data.data.children;

                let postsHtml = `<h3>Latest posts from r/${subreddit}:</h3>`;
                
                posts.forEach(post => {
                    const postData = post.data;
                    const timeAgo = new Date(postData.created_utc * 1000).toLocaleString();
                    
                    postsHtml += `
                        <div class="post-card">
                            <h3>${postData.title}</h3>
                            <div class="post-meta">
                                üë§ u/${postData.author} ‚Ä¢ 
                                ‚¨ÜÔ∏è ${postData.ups} upvotes ‚Ä¢ 
                                üí¨ ${postData.num_comments} comments ‚Ä¢ 
                                üïí ${timeAgo}
                            </div>
                            <div class="post-content">
                                ${postData.selftext ? postData.selftext.substring(0, 300) + '...' : 'Link post'}
                            </div>
                            <button class="btn btn-primary" onclick="generateCommentForPost('${postData.title.replace(/'/g, "\\'")}', '${postData.selftext ? postData.selftext.substring(0, 200).replace(/'/g, "\\'") : ''}')">
                                üí¨ Generate Comment for This Post
                            </button>
                        </div>
                    `;
                });

                document.getElementById('posts-container').innerHTML = postsHtml;
                
                // Update stats
                stats.subredditsExplored++;
                updateStats();

            } catch (error) {
                showAlert('posts-container', `Error loading posts: ${error.message}`, 'error');
            }
        }

        // Generate AI post
        async function generatePost() {
            const topic = document.getElementById('postTopic').value.trim();
            const subreddit = document.getElementById('targetSubreddit').value;
            const postType = document.getElementById('postType').value;

            if (!topic) {
                showAlert('generated-post', 'Please enter a topic or keywords', 'error');
                return;
            }

            if (!geminiApiKey) {
                showAlert('generated-post', 'Please set your Gemini API key in Settings first', 'error');
                return;
            }

            const generateBtn = event.target;
            generateBtn.disabled = true;
            generateBtn.textContent = 'üîÑ Generating...';

            const prompt = `Create a ${postType} for Reddit's r/${subreddit} community about: ${topic}

Please generate:
1. A catchy, engaging title (under 200 characters)
2. Detailed post content (300-500 words) that provides value to the community

Make it:
- Authentic and conversational
- Informative and helpful  
- Engaging for Reddit users
- Appropriate for r/${subreddit}
- Following Reddit etiquette

Format your response as:
TITLE: [your title here]

CONTENT: [your content here]`;

            try {
                const response = await callGeminiAPI(prompt);
                
                if (response) {
                    const parts = response.split('CONTENT:');
                    const title = parts[0].replace('TITLE:', '').trim();
                    const content = parts[1] ? parts[1].trim() : 'Content generation failed';

                    document.getElementById('generatedTitle').value = title;
                    document.getElementById('generatedContent').value = content;
                    document.getElementById('generated-post').style.display = 'block';

                    stats.postsGenerated++;
                    updateStats();

                    showAlert('generated-post', 'Post generated successfully! Review and edit as needed.', 'success');
                }

            } catch (error) {
                showAlert('generated-post', `Generation failed: ${error.message}`, 'error');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'ü§ñ Generate Post with AI';
            }
        }

        // Generate AI comment
        async function generateComment() {
            const postTitle = document.getElementById('commentPostTitle').value.trim();
            const postContent = document.getElementById('commentPostContent').value.trim();
            const style = document.getElementById('commentStyle').value;

            if (!postTitle) {
                showAlert('generated-comments', 'Please enter a post title', 'error');
                return;
            }

            if (!geminiApiKey) {
                showAlert('generated-comments', 'Please set your Gemini API key in Settings first', 'error');
                return;
            }

            document.getElementById('generated-comments').innerHTML = '<div class="loading">Generating comments...</div>';

            const styleMap = {
                'helpful': 'helpful and informative, providing additional insights or solutions',
                'funny': 'witty and humorous while staying appropriate and relevant',
                'agreeable': 'supportive and agreeable, building on the original post',
                'question': 'asking thoughtful follow-up questions to encourage discussion',
                'story': 'sharing a related personal experience or anecdote'
            };

            const prompt = `Write a Reddit comment for this post:

Title: "${postTitle}"
${postContent ? `Content: "${postContent}"` : ''}

Style: ${styleMap[style]}

Requirements:
- Keep it under 150 words
- Be authentic and conversational
- Add value to the discussion
- Follow Reddit etiquette
- Be engaging and natural

Generate 3 different comment variations.`;

            try {
                const response = await callGeminiAPI(prompt);
                
                if (response) {
                    const comments = response.split('\n').filter(line => line.trim().length > 20);
                    
                    let commentsHtml = '<h3>Generated Comments:</h3>';
                    comments.forEach((comment, index) => {
                        if (comment.trim()) {
                            commentsHtml += `
                                <div class="comment-item">
                                    <div class="comment-tone">${style}</div>
                                    <p>${comment.trim()}</p>
                                    <button class="copy-btn" onclick="copyText('${comment.trim().replace(/'/g, "\\'")}')">üìã Copy Comment</button>
                                </div>
                            `;
                        }
                    });

                    document.getElementById('generated-comments').innerHTML = commentsHtml;
                    
                    stats.commentsGenerated++;
                    updateStats();
                }

            } catch (error) {
                showAlert('generated-comments', `Generation failed: ${error.message}`, 'error');
            }
        }

        // Generate comment for specific post
        function generateCommentForPost(title, content) {
            // Switch to comments tab and pre-fill
            switchTab('comments');
            document.querySelector('[onclick="switchTab(\'comments\')"]').click();
            
            document.getElementById('commentPostTitle').value = title;
            document.getElementById('commentPostContent').value = content;
            
            // Auto-generate
            setTimeout(() => generateComment(), 500);
        }

        // Suggest trending topics
        async function suggestTopics() {
            if (!geminiApiKey) {
                showAlert('generated-post', 'Please set your Gemini API key in Settings first', 'error');
                return;
            }

            const subreddit = document.getElementById('targetSubreddit').value;
            const prompt = `Suggest 5 trending and engaging topic ideas for Reddit's r/${subreddit} community. 

Make them:
- Current and relevant
- Likely to generate discussion
- Appropriate for the community
- Specific and actionable

Just list the topics, one per line.`;

            try {
                const response = await callGeminiAPI(prompt);
                if (response) {
                    alert(`Trending Topic Suggestions for r/${subreddit}:\n\n${response}`);
                }
            } catch (error) {
                showAlert('generated-post', `Topic suggestion failed: ${error.message}`, 'error');
            }
        }

        // Call Gemini API
        async function callGeminiAPI(prompt) {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${geminiApiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: prompt
                        }]
                    }]
                })
            });

            if (!response.ok) {
                throw new Error('API request failed');
            }

            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
        }

        // Copy to clipboard
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            element.select();
            document.execCommand('copy');
            showAlert(elementId, 'Copied to clipboard!', 'success');
            setTimeout(() => {
                document.querySelector(`#${elementId} + .alert`).remove();
            }, 2000);
        }

        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Comment copied to clipboard!');
            });
        }

        // Settings functions
        function saveSettings() {
            geminiApiKey = document.getElementById('geminiApiKey').value.trim();
            if (geminiApiKey) {
                localStorage.setItem('geminiApiKey', geminiApiKey);
                showAlert('settings-status', 'Settings saved successfully!', 'success');
            } else {
                showAlert('settings-status', 'Please enter your Gemini API key', 'error');
            }
        }

        async function testGeminiConnection() {
            if (!geminiApiKey) {
                showAlert('settings-status', 'Please enter and save your API key first', 'error');
                return;
            }

            try {
                await callGeminiAPI('Say "Hello, Reddit Assistant!" in a friendly way.');
                showAlert('settings-status', 'AI connection successful! ‚úÖ', 'success');
            } catch (error) {
                showAlert('settings-status', `Connection failed: ${error.message}`, 'error');
            }
        }

        // Utility functions
        function showAlert(containerId, message, type) {
            const container = document.getElementById(containerId);
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.innerHTML = message;
            
            if (container.querySelector('.alert')) {
                container.querySelector('.alert').remove();
            }
            
            container.appendChild(alertDiv);
        }

        function updateStats() {
            document.getElementById('postsGenerated').textContent = stats.postsGenerated;
            document.getElementById('commentsGenerated').textContent = stats.commentsGenerated;
            document.getElementById('subredditsExplored').textContent = stats.subredditsExplored;
            
            localStorage.setItem('redditAssistantStats', JSON.stringify(stats));
        }

        // Load settings on page load
        window.onload = function() {
            const savedApiKey = localStorage.getItem('geminiApiKey');
            if (savedApiKey) {
                geminiApiKey = savedApiKey;
                document.getElementById('geminiApiKey').value = savedApiKey;
            }

            const savedStats = localStorage.getItem('redditAssistantStats');
            if (savedStats) {
                stats = JSON.parse(savedStats);
                updateStats();
            }
        };
    </script>
</body>
</html>
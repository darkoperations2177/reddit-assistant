<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reddit Assistant Pro - Real API Integration</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>ü§ñ Reddit Assistant Pro</h1>
                    <span class="version-badge">Live API v2.0</span>
                </div>
                <div class="header-actions">
                    <div class="connection-status" id="connectionIndicator">
                        <span class="status-dot offline"></span>
                        <span class="status-text">Disconnected</span>
                    </div>
                    <button class="theme-toggle btn btn--secondary btn--sm" id="themeToggle">üåô Dark</button>
                    <div class="karma-display" id="karmaDisplay" style="display: none;">
                        <span class="karma-label">Total Karma:</span>
                        <span class="karma-value" id="totalKarma">-</span>
                        <button class="btn btn--sm btn--outline refresh-karma" id="refreshKarma" title="Refresh Karma">üîÑ</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="container">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="setup">üîê Setup</button>
                <button class="nav-tab" data-tab="dashboard">üìä Dashboard</button>
                <button class="nav-tab" data-tab="browser">üåê Browse</button>
                <button class="nav-tab" data-tab="comments">üí¨ AI Comments</button>
                <button class="nav-tab" data-tab="posting">üìù Auto-Post</button>
                <button class="nav-tab" data-tab="analytics">üìà Analytics</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            
            <!-- Setup Tab -->
            <div class="tab-content active" id="setup">
                <div class="setup-grid">
                    <div class="card">
                        <div class="card__header">
                            <h2>Reddit API Configuration</h2>
                            <p class="text-secondary">Enter your Reddit app credentials for real API access</p>
                        </div>
                        <div class="card__body">
                            <div class="setup-instructions">
                                <h3>üîë How to get Reddit API credentials:</h3>
                                <ol>
                                    <li>Go to <a href="https://www.reddit.com/prefs/apps" target="_blank">https://www.reddit.com/prefs/apps</a></li>
                                    <li>Click "Create App" or "Create Another App"</li>
                                    <li>Choose <strong>"script"</strong> as the app type</li>
                                    <li>Set redirect URI to: <code>http://localhost:3000/auth/callback</code></li>
                                    <li>Copy the client ID (under the app name) and secret</li>
                                </ol>
                            </div>
                            
                            <form class="auth-form" id="redditAuthForm">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">Client ID</label>
                                        <input type="text" class="form-control" id="clientId" placeholder="14-character client ID" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Client Secret</label>
                                        <input type="password" class="form-control" id="clientSecret" placeholder="27-character secret" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Reddit Username</label>
                                        <input type="text" class="form-control" id="redditUsername" placeholder="Your Reddit username" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Reddit Password</label>
                                        <input type="password" class="form-control" id="redditPassword" placeholder="Your Reddit password" required>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn--primary" id="authenticateBtn">
                                        <span class="btn-text">üîê Authenticate with Reddit</span>
                                        <div class="spinner hidden" id="authSpinner"></div>
                                    </button>
                                    <button type="button" class="btn btn--secondary" id="saveCredentials">üíæ Save Credentials</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h2>Gemini AI Configuration</h2>
                            <p class="text-secondary">Add your Gemini API key for AI-powered content generation</p>
                        </div>
                        <div class="card__body">
                            <div class="setup-instructions">
                                <h3>ü§ñ How to get Gemini API key:</h3>
                                <ol>
                                    <li>Go to <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></li>
                                    <li>Sign in with your Google account</li>
                                    <li>Click "Create API Key"</li>
                                    <li>Copy your API key</li>
                                </ol>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Gemini API Key</label>
                                <input type="password" class="form-control" id="geminiApiKey" placeholder="Your Gemini API key">
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn--primary" id="testGeminiBtn">üß™ Test Gemini Connection</button>
                            </div>

                            <div class="warning-box">
                                <div class="warning-icon">‚ö†Ô∏è</div>
                                <div class="warning-text">
                                    <strong>Security Warning:</strong> API keys are stored locally in your browser. Never share your API keys or use this on shared computers.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Tab -->
            <div class="tab-content" id="dashboard">
                <div class="dashboard-loading hidden" id="dashboardLoading">
                    <div class="loading-spinner"></div>
                    <p>Loading your Reddit data...</p>
                </div>

                <div class="dashboard-content" id="dashboardContent">
                    <div class="dashboard-grid">
                        <div class="card user-info-card">
                            <div class="card__header">
                                <h3>Your Reddit Profile</h3>
                                <button class="btn btn--sm btn--outline" id="refreshProfile">üîÑ Refresh</button>
                            </div>
                            <div class="card__body">
                                <div class="user-stats" id="userStats">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <div class="card karma-breakdown-card">
                            <div class="card__header">
                                <h3>Karma Breakdown</h3>
                            </div>
                            <div class="card__body">
                                <div class="karma-stats" id="karmaStats">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <div class="card recent-activity-card">
                            <div class="card__header">
                                <h3>Recent Posts</h3>
                            </div>
                            <div class="card__body">
                                <div class="recent-posts" id="recentPosts">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <div class="card recent-comments-card">
                            <div class="card__header">
                                <h3>Recent Comments</h3>
                            </div>
                            <div class="card__body">
                                <div class="recent-comments" id="recentComments">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Browser Tab -->
            <div class="tab-content" id="browser">
                <div class="browser-controls">
                    <div class="subreddit-input">
                        <label class="form-label">Browse Subreddit:</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="subredditInput" placeholder="Enter subreddit (e.g., programming)" value="programming">
                            <button class="btn btn--primary" id="loadSubredditBtn">üîç Load Posts</button>
                        </div>
                    </div>
                    <div class="filter-controls">
                        <select class="form-control" id="sortFilter">
                            <option value="hot">üî• Hot</option>
                            <option value="new">üÜï New</option>
                            <option value="top">‚≠ê Top</option>
                            <option value="rising">üìà Rising</option>
                        </select>
                        <select class="form-control" id="timeFilter" style="display: none;">
                            <option value="hour">Past Hour</option>
                            <option value="day">Past 24 Hours</option>
                            <option value="week">Past Week</option>
                            <option value="month">Past Month</option>
                            <option value="year">Past Year</option>
                            <option value="all">All Time</option>
                        </select>
                    </div>
                </div>

                <div class="posts-loading hidden" id="postsLoading">
                    <div class="loading-spinner"></div>
                    <p>Loading posts...</p>
                </div>

                <div class="live-posts-container" id="livePostsContainer">
                    <!-- Live posts loaded from Reddit API -->
                </div>

                <div class="load-more-container">
                    <button class="btn btn--outline btn--full-width" id="loadMoreBtn" style="display: none;">
                        Load More Posts
                    </button>
                </div>
            </div>

            <!-- Comments Tab -->
            <div class="tab-content" id="comments">
                <div class="comments-header">
                    <h2>AI Comment Generation</h2>
                    <p class="text-secondary">Generate intelligent comments for Reddit posts using Gemini AI</p>
                </div>

                <div class="comment-generator">
                    <div class="card">
                        <div class="card__header">
                            <h3>Generate Comments for Post</h3>
                        </div>
                        <div class="card__body">
                            <div class="form-group">
                                <label class="form-label">Post URL or ID</label>
                                <input type="text" class="form-control" id="postUrlInput" placeholder="https://reddit.com/r/subreddit/comments/... or post ID">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Comment Tone</label>
                                <select class="form-control" id="commentTone">
                                    <option value="helpful">üí° Helpful & Informative</option>
                                    <option value="funny">üòÑ Funny & Witty</option>
                                    <option value="supportive">ü§ó Supportive & Encouraging</option>
                                    <option value="analytical">üîç Analytical & Detailed</option>
                                    <option value="casual">üòé Casual & Friendly</option>
                                </select>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn--primary" id="generateCommentsBtn">
                                    <span class="btn-text">ü§ñ Generate Comments</span>
                                    <div class="spinner hidden" id="commentSpinner"></div>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="generated-comments" id="generatedComments">
                        <!-- Generated comments appear here -->
                    </div>
                </div>
            </div>

            <!-- Posting Tab -->
            <div class="tab-content" id="posting">
                <div class="posting-grid">
                    <div class="card create-post-card">
                        <div class="card__header">
                            <h3>Create & Schedule Posts</h3>
                        </div>
                        <div class="card__body">
                            <form class="create-post-form" id="createPostForm">
                                <div class="form-group">
                                    <label class="form-label">Target Subreddit</label>
                                    <input type="text" class="form-control" id="targetSubreddit" placeholder="e.g., programming, webdev, technology">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Post Title</label>
                                    <input type="text" class="form-control" id="postTitle" placeholder="Enter an engaging title">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Post Type</label>
                                    <select class="form-control" id="postType">
                                        <option value="self">üìù Text Post</option>
                                        <option value="link">üîó Link Post</option>
                                    </select>
                                </div>
                                <div class="form-group" id="contentGroup">
                                    <label class="form-label">Post Content</label>
                                    <textarea class="form-control" id="postContent" rows="8" placeholder="Write your post content..."></textarea>
                                </div>
                                <div class="form-group hidden" id="urlGroup">
                                    <label class="form-label">URL</label>
                                    <input type="url" class="form-control" id="postUrl" placeholder="https://example.com">
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn--secondary" id="generateTopicBtn">üéØ Suggest Topics</button>
                                    <button type="button" class="btn btn--secondary" id="generateContentBtn">ü§ñ Generate Content</button>
                                    <button type="button" class="btn btn--primary" id="postNowBtn">üöÄ Post Now</button>
                                    <button type="button" class="btn btn--outline" id="schedulePostBtn">üìÖ Schedule</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="card topic-suggestions-card">
                        <div class="card__header">
                            <h3>Trending Topics</h3>
                            <button class="btn btn--sm btn--outline" id="refreshTopicsBtn">üîÑ Refresh</button>
                        </div>
                        <div class="card__body">
                            <div class="trending-topics" id="trendingTopics">
                                <div class="loading-message">Click "Refresh" to load trending topics</div>
                            </div>
                        </div>
                    </div>

                    <div class="card posting-queue-card">
                        <div class="card__header">
                            <h3>Posting Queue</h3>
                        </div>
                        <div class="card__body">
                            <div class="posting-queue" id="postingQueue">
                                <div class="empty-state">No scheduled posts</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div class="tab-content" id="analytics">
                <div class="analytics-grid">
                    <div class="card karma-chart-card">
                        <div class="card__header">
                            <h3>Karma Growth Analytics</h3>
                        </div>
                        <div class="card__body">
                            <div class="chart-container" style="position: relative; height: 350px;">
                                <canvas id="karmaChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="card performance-card">
                        <div class="card__header">
                            <h3>Performance Metrics</h3>
                        </div>
                        <div class="card__body">
                            <div class="performance-metrics" id="performanceMetrics">
                                <!-- Performance data -->
                            </div>
                        </div>
                    </div>

                    <div class="card rate-limits-card">
                        <div class="card__header">
                            <h3>API Rate Limits</h3>
                        </div>
                        <div class="card__body">
                            <div class="rate-limit-status" id="rateLimitStatus">
                                <!-- Rate limit information -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div class="modal hidden" id="commentModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Post Comment to Reddit</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="comment-preview" id="commentPreview"></div>
                <div class="form-actions">
                    <button class="btn btn--secondary modal-close">Cancel</button>
                    <button class="btn btn--primary" id="submitCommentBtn">
                        <span class="btn-text">üí¨ Post Comment</span>
                        <div class="spinner hidden"></div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal hidden" id="scheduleModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Schedule Post</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Schedule Time</label>
                    <input type="datetime-local" class="form-control" id="scheduleDateTime">
                </div>
                <div class="form-group">
                    <label class="form-label">Auto-delete if score below:</label>
                    <input type="number" class="form-control" id="autoDeleteThreshold" value="0" min="-100" max="100">
                    <small class="text-secondary">Optional: Automatically delete post if it gets too many downvotes</small>
                </div>
                <div class="form-actions">
                    <button class="btn btn--secondary modal-close">Cancel</button>
                    <button class="btn btn--primary" id="confirmScheduleBtn">üìÖ Schedule</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
</body>
</html>